trigger:
- master

jobs:
- job:
  displayName: Linux
  pool:
    vmImage: 'ubuntu-16.04'

  steps:
  - bash: echo "##vso[task.prependpath]$CONDA/bin"
    displayName: Add conda to PATH

  - bash: conda env create -f environment.yml
    displayName: Create conda environment

  - bash: |
      source activate essays-on-data-science
      pre-commit install
    displayName: Install pre-commit

  - bash: |
      source activate essays-on-data-science
      make deploy
    displayName: Deploy docs to GitHub pages
